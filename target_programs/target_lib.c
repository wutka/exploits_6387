#include "target_lib.h"

void _start()
{
    int x = main();
    exit(x);
}

char *prompt(char *prompt, int prompt_len, char *buff) {
    char ch;
    ch = '?';
    write(1, &ch, 1);
    write(1, prompt, prompt_len);
    ch = 0;
    write(1, &ch, 1);

    return gets(buff);
}

char *gets(char *buff) {
    char *start = buff;
    char ch;
    for (;;) {
        int n = read(0, &ch, 1);
        if (n == 0) {
            exit(0);
        } else if (ch == '\n') {
            *buff = 0;
            return start;
        } else {
            *buff++ = ch;
        }
    }
}

int strcmp(char *s1, char *s2) {
    while (*s1 && *s2) {
        int diff = *s1++ - *s2++;
        if (diff != 0) return diff;
    }
    if (*s1) return 1;
    if (*s2) return -1;
    return 0;
}
