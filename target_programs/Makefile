ARCH := $(shell uname -p)

all: target1 target2 target3 target4 target5 target6 target7 target8 makexorpw makeaes256pw

target1: target1.c target_lib.c $(ARCH)/target_lib.c
	gcc -g -O0 -nostdlib -nostartfiles -no-pie -o target1 target1.c target_lib.c $(ARCH)/target_lib.c

target2: target2.c target_lib.c $(ARCH)/target_lib.c
	gcc -g -O0 -nostdlib -nostartfiles -no-pie -o target2 target2.c target_lib.c $(ARCH)/target_lib.c

target3: target3.c target_lib.c $(ARCH)/target_lib.c aes256.c aes256.h
	gcc -g -O0 -nostdlib -nostartfiles -no-pie -o target3 target3.c aes256.c target_lib.c $(ARCH)/target_lib.c -lm

target4: target4.c target_lib.c $(ARCH)/target_lib.c
	gcc -g -O0 -nostdlib -nostartfiles -no-pie -o target4 target4.c target_lib.c $(ARCH)/target_lib.c

target5: target5.c target_lib.c $(ARCH)/target_lib.c
	gcc -g -O0 -nostdlib -nostartfiles -no-pie -fno-stack-protector -o target5 target5.c target_lib.c $(ARCH)/target_lib.c

target6: target6.c target_lib.c $(ARCH)/target_lib.c
	gcc -g -O0 -nostdlib -nostartfiles -no-pie -fno-pie -fno-stack-protector -z execstack -o target6 target6.c target_lib.c $(ARCH)/target_lib.c

target7: target6.c target_lib.c $(ARCH)/target_lib.c
	gcc -g -O0 -nostdlib -nostartfiles -pie -fpie -fno-stack-protector -z execstack -o target7 target6.c target_lib.c $(ARCH)/target_lib.c

target8: target6.c target_lib.c $(ARCH)/target_lib.c
	gcc -g -O0 -nostdlib -nostartfiles -pie -fpie -o target8 target6.c target_lib.c $(ARCH)/target_lib.c

makexorpw: makexorpw.c
	gcc -o makexorpw makexorpw.c

makeaes256pw: makeaes256pw.c aes256.h aes256.c
	gcc -o makeaes256pw makeaes256pw.c aes256.c -lm

clean:
	rm *.o target1 target2 target3 target4 target5 target6 target7 target8 makexorpw makeaes256pw
